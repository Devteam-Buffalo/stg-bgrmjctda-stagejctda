<?php
/**
 * Template Name: Photo Galleries
 *
 * @link https://codex.wordpress.org/Template_Hierarchy
 *
 * @package jc-network
 */
get_header();
	do_action( 'jc_network_before_full_width_content_area' );
		while ( have_posts() ) : the_post();
		?>
		<article id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
			<?php get_template_part( 'template-parts/content/content-basic-heading' ); ?>
			
			<div class="entry-content">
				<section class="uk-container uk-container-center section-spacing">
					<div class="uk-grid uk-grid-width-large-1-3 uk-grid-width-medium-1-2 uk-grid-width-1-1 content-tiles" data-uk-grid-margin>
						<?php
						global $post;
		
						$args = array(
							'post_type'        => 'galleries',
							'post_parent'      => '0',
							'posts_per_page'   => -1,
							'orderby'          => 'menu_order',
							'order'            => 'DESC',
							'post_status'      => 'publish' );
		
							$posts = get_posts($args);
		
							foreach($posts as $post) : setup_postdata($post);
		
							$thumb_array = get_field('gallery');
							$thumb_id = $thumb_array[0]['id'];
							?>
								<div class="content-tile">
									<figure class="uk-overlay">
										<?php echo wp_get_attachment_image( $thumb_id, 'medium', '', array( 'class' => 'uk-responsive' ) ); ?>
		
										<figcaption class="uk-overlay-panel">
											<span class="overlay-content">
												<h3 class="section-title">&nbsp;</h3>
												<h4 class="sub-section-title text-shadow small-shadow overlay-title overlay-blue"><?php the_title(); ?></h4>
											</span>
										</figcaption>
		
										<a class="uk-position-cover" href="<?php the_permalink(); ?>">&nbsp;</a>
									</figure>
								</div>
							<?php wp_reset_postdata();
						endforeach; ?>
					</div>
				</section>
			</div><!-- .entry-content -->
		
			<footer class="screen-reader-text entry-footer">
			</footer><!-- .entry-footer -->
		</article><!-- #post-## -->
		<?php
		endwhile;
	do_action( 'jc_network_after_full_width_content_area' );
get_footer();