<?php
/*
**  @file               location-map.php
**  @description        
**  @package            jctda-public-prod
**  @since              1.0.0
**  @author             lpeterson
**  @date               2/23/18
*/

defined('ABSPATH') || exit;

if ( ! function_exists( 'jc_model_overlay_map' ) ) :

	function jc_model_overlay_map( $args = [] ) {
		
		if( ! is_array( $args ) ) 
			return false;
		
		$locations = $args['locations'];

		ob_start();
		
		if( ! is_mobile() && ! is_tablet() ) : ?>
		
		<div class="location-content-container">
			<div class="location-content">
				<section class="uk-container uk-container-center locations-map-container">
					<div class="locations-map">
						<div id="locations-map-frame">
							<?php foreach ( $locations as $post ) : ?>
							<div class="marker" data-lat="<?= $post['address_gps']['lat'] ?>" data-lng="<?= $post['address_gps']['lng'] ?>">
								<a href="<?= $post['permalink'] ?>" title="View <?= $post['post_title'] ?>" class="marker-link">
									<h5><?= $post['page_heading'] ?></h5>
	
									<p><?= $post['page_subheading'] ?></p>
	
									View Location
								</a>
							</div>
							<?php endforeach ?>
						</div>
						
						<div class="locations-list-overlay-container">
							<div class="locations-list-overlay">
								<ul class="uk-list locations-list">
									<?php foreach ( $locations as $post ) : ?>
									<li id="post-<?= $post['post_id'] ?>" class="location-container">
										<a href="<?= $post['permalink'] ?>" title="" class="uk-grid uk-grid-small location location-link outdoors-location">
											<div class="uk-width-1-4 location-image">
												<img src="<?= $post['tile_image'] ?>" alt="<?= $post['post_title'] ?>" width="100" height="100" class="image">
											</div>
	
											<div class="uk-width-3-4 location-content">
												<h3 class="location-name"><?= $post['page_heading'] ?></h3>
												<p class="location-excerpt"><span><?= $post['page_subheading'] ?></span></p>
											</div>
										</a>
									</li>
									<?php endforeach; ?>
								</ul>
							</div>
						</div>
					</div>
				</section>
			</div>
		</div>
		<?php endif;

		return ob_get_clean();

	}

endif;