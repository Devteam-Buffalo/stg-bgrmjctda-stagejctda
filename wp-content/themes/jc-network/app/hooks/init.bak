<?php
/**
 * Project Name:    Discover Jackson NC
 * Project URI:     https://www.discoverjacksonnc.com
 * Description:     Remove unnecessary overhead from WP core
 * Agency:          Rawle Murdy Associates
 * Agency URI:      https://www.rawlemurdy.com
 * Text Domain:     jctda
 *
 * @package         jctda
 * @since           20180930
 * @author          lpeterson
 */

add_action( 'init', function() {
	$wp_action = 'wp_head';
	$return_false = '__return_false';
	$support = 'excerpt';

	remove_action( $wp_action, 'adjacent_posts_rel_link_wp_head', 10 );
	remove_action( $wp_action, 'feed_links_extra', 3 );
	remove_action( $wp_action, 'print_emoji_detection_script', 7 );
	remove_action( $wp_action, 'rest_output_link_wp_head', 10 );
	remove_action( $wp_action, 'rsd_link' );
	remove_action( $wp_action, 'wlwmanifest_link' );
	remove_action( $wp_action, 'wp_generator' );
	remove_action( $wp_action, 'wp_oembed_add_discovery_links' );
	remove_action( $wp_action, 'wp_oembed_add_host_js' );
	remove_action( $wp_action, 'wp_shortlink_wp_head', 10 );
	remove_action( 'admin_print_scripts', 'print_emoji_detection_script' );
	remove_action( 'admin_print_styles', 'print_emoji_styles' );
	remove_action( 'wp_print_styles', 'print_emoji_styles' );
	remove_filter( 'comment_text_rss', 'wp_staticize_emoji' );
	remove_filter( 'the_content_feed', 'wp_staticize_emoji' );
	remove_filter( 'wp_mail', 'wp_staticize_emoji_for_email' );

	add_filter( 'emoji_svg_url', $return_false );
	add_filter( 'show_recent_comments_widget_style', $return_false );
	add_filter( 'use_default_gallery_style', $return_false );

	add_post_type_support( 'page', $support );
	add_post_type_support( 'post', $support );
});
